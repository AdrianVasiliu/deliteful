<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: delite/Destroyable.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: delite/Destroyable.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module delite/Destroyable */
define([
	"dcl/advise",
	"dcl/dcl"
], function (advise, dcl) {

	// module:
	//		delite/Destroyable

	/**
	 * @summary
	 * Mixin to track handles and release them when instance is destroyed.
	 * @description
	 * Call this.own(...) on list of handles (returned from dojo/aspect, dojo/on,
	 * dojo/Stateful::watch, or any class (including widgets) with a destroy() or remove() method.
	 * Then call destroy() later to destroy this instance and release the resources.
	 * @class module:delite/Destroyable
	 * @mixin
	 */
	var Destroyable = dcl(null, /** @lends module:delite/Destroyable# */{
		// summary:
		//		Mixin to track handles and release them when instance is destroyed.
		// description:
		//		Call this.own(...) on list of handles (returned from dojo/aspect, dojo/on,
		//		dojo/Stateful::watch, or any class (including widgets) with a destroy() or remove() method.
		//		Then call destroy() later to destroy this instance and release the resources.

		/**
		 * Destroy this class, releasing any resources registered via own().
		 */
		destroy: dcl.advise({
			before: function () { this._beingDestroyed = true; },
			after: function () { this._destroyed = true; }
		}),
		/*=====
		destroy: function () {
			// summary:
			//		Destroy this class, releasing any resources registered via own().
		},
		=====*/

		/**
		 * Track specified handles and remove/destroy them when this instance is destroyed, unless they were
		 * already removed/destroyed manually.
		 */
		own: function () {
			// summary:
			//		Track specified handles and remove/destroy them when this instance is destroyed, unless they were
			//		already removed/destroyed manually.
			// tags:
			//		protected
			// returns:
			//		The array of specified handles, so you can do for example:
			//	|		var handle = this.own(on(...))[0];

			// transform arguments into an Array
			var ary = Array.prototype.slice.call(arguments);
			ary.forEach(function (handle) {
				var destroyMethodName = "destroy" in handle ? "destroy" : "remove";

				// When this.destroy() is called, destroy handle.  Since I'm using aspect.before(),
				// the handle will be destroyed before a subclass's destroy() method starts running.
				var odh = advise.before(this, "destroy", function () {
					handle[destroyMethodName]();
				});

				// If handle is destroyed manually before this.destroy() is called,
				// remove the listener set directly above.
				var hdh = advise.after(handle, destroyMethodName, function () {
					odh.destroy();
					hdh.destroy();
				});
			}, this);

			return ary;		// [handle]
		}
	});

	dcl.chainBefore(Destroyable, "destroy");

	return Destroyable;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="Container.html">delite/Container</a></li><li><a href="CustomElement.html">delite/CustomElement</a></li><li><a href="Destroyable.html">delite/Destroyable</a></li><li><a href="Invalidating.html">delite/Invalidating</a></li><li><a href="Scrollable.html">delite/Scrollable</a></li><li><a href="Stateful.html">delite/Stateful</a></li><li><a href="Widget.html">delite/Widget</a></li><li><a href="ScrollableContainer.html">deliteful/ScrollableContainer</a></li></ul><h3>Mixins</h3><ul></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha4</a> on Fri Mar 14 2014 14:51:32 GMT+0100 (Romance Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
